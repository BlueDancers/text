#node 同步/异步写入文件

题外话 : 也不知道现在学node是对是错 看招聘都要vue react

 vue还行 虽然原理不懂,但是基本项目还能写 react还没有接触过,心里忐忑不知道能不能找到工作啊......

**以下代码在node环境下面都运行**

```JavaScript
//1. 引入文件
const fs = require("fs");

//2. 打开文件
let fd = fs.openSync("./1.txt", "w");

//3. 写入文件
fs.writeFileSync(fd, "今天天气好");

//4. 保存文件 并且退出
fs.closeSync(fd);

//以上是node的同步文件操作,下面是异步的文件操作

fs.open('./异步操作txt', 'a', (err,fd) => {
  console.log('异步');
  //判断时候出错
  if (!err) {
    //写入文件
    fs.writeFile(fd, '这是异步写入',(err) => {
      //异步回调判断时候写入成功
      if(!err) {
        console.log('写入成功')
      } else {
        console.log('出错了');
      }
      //关闭的时候异步判断时候关闭成功
      fs.close(fd, (err) => {
        if (!err) {
          console.log('文件流关闭')
        }
      })
    })
  } else {
    throw err;
  }
});
```

#### fs.open(path, flags[, mode], callback)

关于flags 对文件操作的选项

- `'r'` - 以读取模式打开文件。如果文件不存在则发生异常。

- `'r+'` - 以读写模式打开文件。如果文件不存在则发生异常。

- `'rs+'` - 以同步读写模式打开文件。命令操作系统绕过本地文件系统缓存。

  这对 NFS 挂载模式下打开文件很有用，因为它可以让你跳过潜在的旧本地缓存。 它对 I/O 的性能有明显的影响，所以除非需要，否则不要使用此标志。

  注意，这不会使 `fs.open()` 进入同步阻塞调用。 如果那是你想要的，则应该使用 `fs.openSync()`。

- `'w'` - 以写入模式打开文件。文件会被创建（如果文件不存在）或截断（如果文件存在）。

- `'wx'` - 类似 `'w'`，但如果 `path` 存在，则失败。

- `'w+'` - 以读写模式打开文件。文件会被创建（如果文件不存在）或截断（如果文件存在）。

- `'wx+'` - 类似 `'w+'`，但如果 `path` 存在，则失败。

- `'a'` - 以追加模式打开文件。如果文件不存在，则会被创建。

- `'ax'` - 类似于 `'a'`，但如果 `path` 存在，则失败。

- `'a+'` - 以读取和追加模式打开文件。如果文件不存在，则会被创建。

- `'ax+'` - 类似于 `'a+'`，但如果 `path` 存在，则失败。3

  `callback`  回调有两个参数 `(err, fd)`。